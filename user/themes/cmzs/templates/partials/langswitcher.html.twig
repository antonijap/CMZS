<div class="container">
    <div class="row d-flex flex-row-reverse">
    {% for language in langswitcher.languages %}

    {% set show_language = true %}
    {% if language == langswitcher.current %}
        {% set lang_url = page.url %}
        {% set active_class = 'active' %}
        {% set lang = grav.language.getLanguageURLPrefix(language)|replace({'/' : ''}) %}
    {% else %}
        {% set base_lang_url = base_url_simple ~ grav.language.getLanguageURLPrefix(language) %}
        {% set lang_url = base_lang_url ~ langswitcher.page_route ~ page.urlExtension %}
        {% set untranslated_pages_behavior = grav.config.plugins.langswitcher.untranslated_pages_behavior %}
        {% if untranslated_pages_behavior != 'none' %}
            {% set translated_page = langswitcher.translated_pages[language] %}
            {% if (not translated_page) or (not translated_page.published) %}
                {% if untranslated_pages_behavior == 'redirect' %}
                    {% set lang_url = base_lang_url ~ '/' %}
                {% elseif untranslated_pages_behavior == 'hide' %}
                    {% set show_language = false %}
                {% endif %}
            {% endif %}
        {% endif %}
        {% set active_class = '' %}
        {% set lang = grav.language.getLanguageURLPrefix(language)|replace({'/' : ''}) %}
    {% endif %}

    {% if show_language %}
        <div class="col-auto">
            <a href="{{ lang_url ~ uri.params }}">
                <span class="flag-icon flag-icon-{{ lang }} {{ active_class }}"></span>
            </a>
            {# <a href="{{ lang_url ~ uri.params }}" class="{{ active_class }}">
            <span class="flag-icon flag-icon-{{ lang }}"></span> {{ native_name(language)|capitalize }}
            </a> #}
        </div>

        
    {% endif %}

    {% endfor %}
    </div>
</div>